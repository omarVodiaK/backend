<div class="page-header">
    <h1>Locations</h1>

</div>

<div ng-controller="ModalLocationCtrl">
    <div class="bs-component">
        <div class="row" style="margin-top:20px;">
            <div class="col-md-6">
            </div>
            <div class="col-md-6">
                <div class="pull-right">
                    <!-- angular ui modal -->
                    <script type="text/ng-template" id="locationModalTpl">
                        <form class="form-horizontal" name="locationForm" ng-controller="LocationCtrl" novalidate>
                            <div class="modal-header">
                                <h3 class="modal-title">Location</h3>
                            </div>
                            <div class="modal-body">

                                <div class="form-group">

                                    <div class="row">

                                        <label class="control-label col-xs-2">Name:</label>

                                        <div class="col-xs-10">
                                            <input id="location_label" type="text" name="name" class="form-control"
                                                   placeholder="Name"
                                                   ng-model="location.label"
                                                   value="{{location.label}}" required>
                                        </div>

                                    </div>

                                </div>
                                <div class="form-group">

                                    <div class="row">

                                        <label class="control-label col-xs-2">Description:</label>

                                        <div class="col-xs-10">
                                                <textarea id="location_description" type="text"
                                                          ng-model="location.description"
                                                          class="form-control" rows="2"
                                                          placeholder="Description">{{location.description}}</textarea>
                                        </div>

                                    </div>

                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="control-label col-xs-2">Parent:</label>

                                            <div class="col-xs-10">

                                                <select ng-model="location.loc_parent" id="location_parent"
                                                        class="btn btn-default">

                                                    <option value="0">No Parent</option>

                                                    <option ng-repeat="l in fakeLocations" value="{{l.loc_cd}}"

                                                            ng-selected="{false: '', true: 'selected'} [location.loc_parent == l.loc_cd]">

                                                        {{l.label}}
                                                    </option>

                                                </select>

                                            </div>

                                        </div>

                                        <div class="col-md-6">

                                            <label class="control-label col-xs-2">Player:</label>

                                            <div class="col-xs-10">

                                                <!--<select id="location_player" class="btn btn-default" ng-model="plloc" ng-options="player.plr_name for player in players track by player.plr_cd" ng-change="selectPlayer(location)" >-->
                                                <!--<option value="0">No Player</option>-->
                                                <!--</select>-->

                                                <select class="btn btn-default" ng-model="location.plr_cd"
                                                        id="location_player">

                                                    <option value="0">No Player</option>

                                                    <option ng-repeat="p in players" value="{{p.plr_cd}}"
                                                            ng-selected="{false: '', true: 'selected'} [location.plr_cd == p.plr_cd]">
                                                        {{p.plr_name}}
                                                    </option>

                                                </select>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button class="btn btn-danger" type="button" ng-click="cancel()">Cancel</button>
                                <button class="btn btn-primary"
                                        type="submit" ng-click="ok()">
                                    Save
                                </button>
                            </div>
                        </form>
                    </script>
                    <!-- / -->
                    <!-- Button trigger modal -->
                    <button type="button" ng-click="open('lg','locationModalTpl')" class="btn btn-primary">Add
                        Location
                    </button>
                </div>

            </div>
        </div>
    </div>

    <div class="bs-component" style="margin-top:20px;" ng-if="locations.length >0">

        <div class="clearfix visible-sm"></div>

        <div class="row">

            <div class="col-md-6">
                <!-- Tree View -->
                <abn-tree tree-data="locations" tree-control="my_tree"></abn-tree>

            </div>
            <div class="col-md-1"></div>
            <div class="col-md-4" ng-if="output.label != undefined">
                <div class="row stylish-panel">
                    <div class="col-md-12">
                        <div>
                            <!-- TODO Fix image now showing-->
                            <img lazy-src="assets/images/logo.png"
                                 class="img-circle img-thumbnail">

                            <h2>{{output.label}}</h2>

                            <p>{{output.description}} </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-1"></div>

        </div>
    </div>

    <div class="bs-component" style="margin-top:20px;" ng-if="locations.length == 0">

        <div class="row">

            <div class="alert alert-info" role="alert"><i class="glyphicon glyphicon-info-sign"></i> You have 0
                location!
            </div>

        </div>

    </div>
</div>
<style>

    .stylish-panel {
        text-align: center;
    }

    .stylish-panel > div > div {
        border: 1px solid transparent;
        border-radius: 4px;
        transition: 0.2s;
    }

    .stylish-panel > div:hover > div {
        margin-top: -10px;
        border: 1px solid rgb(200, 200, 200);
        box-shadow: rgba(0, 0, 0, 0.1) 0px 5px 5px 2px;
        background: rgba(200, 200, 200, 0.1);
        transition: 0.5s;
    }

    .stylish-panel > div:hover img {
        border-radius: 50%;
        -webkit-transform: rotate(360deg);
        -moz-transform: rotate(360deg);
        -o-transform: rotate(360deg);
        -ms-transform: rotate(360deg);
        transform: rotate(360deg);
    }

</style>